---
// src/components/SearchBar/SearchBar.astro (VERSI칍N SIMPLIFICADA Y A PRUEBA DE ERRORES)
import { Icon } from 'astro-icon/components';
---

<div class="search-wrapper">
  <!-- 
    Esta es la parte m치s importante. 
    action="/search" -> Env칤a los datos a la p치gina de b칰squeda.
    method="get" -> Pone los datos en la URL.
  -->
  <form class="search-form" action="/search" method="get">
    
    <input
      type="search"
      name="q" 
      placeholder="Buscar art칤culos..."
      aria-label="Campo de b칰squeda"
      class="search-input"
    />

    <button type="submit" class="search-button" aria-label="Buscar">
  游댌
</button>


  </form>
</div>

<style lang="scss">
  // 1. A침adimos la importaci칩n del m칩dulo de color.
  @use 'sass:color';
  @use '../../styles/variables' as var;

  .search-wrapper {
    display: flex;
    justify-content: center;
    width: 100%;
    padding: 1rem 0;
  }

  .search-form {
    display: flex;
    align-items: center;
    width: 100%;
    max-width: 500px;
    background-color: #fff;
    border-radius: 9999px; // P칤ldora
    border: 2px solid var.$primary-color;
    overflow: hidden; // Asegura que los bordes redondeados se apliquen a los hijos
    transition: box-shadow 0.2s ease;

    &:focus-within {
      // Efecto de brillo cuando el formulario est치 activo
      box-shadow: 0 0 0 3px rgba(var.$primary-color, 0.5);
    }
  }

  .search-input {
    flex-grow: 1; // El input ocupa todo el espacio disponible
    height: 48px;
    padding: 0 1.25rem;
    border: none;
    background: transparent;
    font-size: 1rem;
    color: #333;

    &::placeholder {
      color: #888;
      opacity: 1;
    }

    // Oculta la 'x' por defecto de los inputs de b칰squeda
    &::-webkit-search-decoration,
    &::-webkit-search-cancel-button {
      -webkit-appearance: none;
    }

    &:focus {
      outline: none; // Quitamos el borde azul por defecto
    }
  }

  .search-button {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-shrink: 0;
    width: 60px;
    height: 48px;
    background-color: var.$primary-color;
    border: none;
    cursor: pointer;
    color: #1e1e1e;
    transition: background-color 0.2s ease;

    &:hover {
      // 2. Reemplazamos lighten() por color.adjust().
      background-color: color.adjust(var.$primary-color, $lightness: 10%);
    }
  }
</style>