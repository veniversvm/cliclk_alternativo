---
// src/components/SearchBar/SearchBar.astro

// 1. Definimos las props que el componente puede aceptar.
//    'size' ser치 opcional y podr치 ser 'small' o 'large'.
interface Props {
  size?: 'small' | 'large';
}

// 2. Si no se pasa la prop 'size', por defecto ser치 'large'.
const { size = 'large' } = Astro.props;
---

<!-- 3. Usamos la directiva class:list para a침adir una clase CSS
     din치micamente si el tama침o es 'small'. Esto nos permitir치
     aplicar estilos espec칤ficos. -->
<div class:list={["search-wrapper", { "search-wrapper--small": size === 'small' }]}>
  <form class="search-form" action="/search" method="get">
    <input
      type="search"
      name="q" 
      placeholder="Buscar en el sitio..."
      aria-label="Campo de b칰squeda"
      class="search-input"
    />
    <button type="submit" class="search-button" aria-label="Buscar">
      游댌
    </button>
  </form>
</div>

<style lang="scss">
  @use 'sass:color';
  @use '../../styles/variables' as var;

  /* --- ESTILOS BASE (GRANDE - POR DEFECTO) --- */
  .search-wrapper {
    display: flex;
    justify-content: center;
    width: 100%;
    padding: 1rem 0;
  }

  .search-form {
    display: flex;
    align-items: center;
    width: 100%;
    max-width: 500px;
    background-color: #fff;
    border-radius: 9999px; // P칤ldora
    border: 2px solid var.$primary-color;
    overflow: hidden;
    transition: box-shadow 0.2s ease;

    &:focus-within {
      box-shadow: 0 0 0 3px rgba(var.$primary-color, 0.5);
    }
  }

  .search-input {
    flex-grow: 1;
    height: 48px;
    padding: 0 1.25rem;
    border: none;
    background: transparent;
    font-size: 1rem;
    color: #333;

    &::placeholder {
      color: #888;
      opacity: 1;
    }
    &::-webkit-search-decoration,
    &::-webkit-search-cancel-button {
      -webkit-appearance: none;
    }
    &:focus {
      outline: none;
    }
  }

  .search-button {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-shrink: 0;
    width: 60px;
    height: 48px;
    background-color: var.$primary-color;
    border: none;
    cursor: pointer;
    color: #1e1e1e;
    transition: background-color 0.2s ease;

    &:hover {
      background-color: color.adjust(var.$primary-color, $lightness: 10%);
    }
  }


  /* --- 4. ESTILOS PARA LA VERSI칍N PEQUE칌A --- */
  /*    Estos estilos se aplicar치n solo cuando el wrapper
        tenga la clase 'search-wrapper--small'. */
  
  .search-wrapper--small {
    padding: 2rem 0; // Le damos un poco m치s de aire vertical
    
    .search-form {
      max-width: 400px; // Un poco m치s angosto
      border-width: 1px; // Un borde m치s sutil
    }

    .search-input {
      height: 40px; // Menos alto
      font-size: 0.9rem; // Texto m치s peque침o
      padding: 0 1rem;
    }

    .search-button {
      width: 50px; // Bot칩n m치s peque침o
      height: 40px;
      font-size: 1.1rem; // Emoji un poco m치s peque침o
    }
  }
</style>