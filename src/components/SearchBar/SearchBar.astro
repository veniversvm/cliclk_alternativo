---
interface Props {
  size?: 'small' | 'large';
}
const { size = 'large' } = Astro.props;
---

<div class:list={["search-wrapper", { "search-wrapper--small": size === 'small' }]}>
  <!--
    ACCI√ìN CLAVE: Eliminamos el <script> por completo.
    El action="/search" y method="get" es todo lo que Astro necesita
    para interceptar la navegaci√≥n y activar las View Transitions.
  -->
  <form class="search-form" action="/search" method="get">
    <input
      type="search"
      name="q"
      placeholder="Buscar en el sitio..."
      aria-label="Campo de b√∫squeda"
      class="search-input"
    />
    <button type="submit" class="search-button" aria-label="Buscar">
      üîç
    </button>
  </form>
</div>

<style lang="scss">
  // Tus estilos se mantienen exactamente iguales, no hay que cambiar nada aqu√≠.
  @use 'sass:color';
  @use '../../styles/variables' as var;

  .search-wrapper {
    display: flex;
    justify-content: center;
    width: 100%;
    padding: 1rem 0;
  }
  .search-form {
    display: flex;
    align-items: center;
    width: 100%;
    max-width: 500px;
    background-color: #fff;
    border-radius: 9999px;
    border: 2px solid var.$primary-color;
    overflow: hidden;
    transition: box-shadow 0.2s ease;
    &:focus-within {
      box-shadow: 0 0 0 3px rgba(var.$primary-color, 0.5);
    }
  }
  .search-input {
    flex-grow: 1;
    height: 48px;
    padding: 0 1.25rem;
    border: none;
    background: transparent;
    font-size: 1rem;
    color: #333;
    &:focus {
      outline: none;
    }
  }
  .search-button {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-shrink: 0;
    width: 60px;
    height: 48px;
    background-color: var.$primary-color;
    border: none;
    cursor: pointer;
    color: #1e1e1e;
    transition: background-color 0.2s ease;
    &:hover {
      background-color: color.adjust(var.$primary-color, $lightness: 10%);
    }
  }
  .search-wrapper--small {
    padding: 2rem 0;
    .search-form { max-width: 400px; border-width: 1px; }
    .search-input { height: 40px; font-size: 0.9rem; padding: 0 1rem; }
    .search-button { width: 50px; height: 40px; font-size: 1.1rem; }
  }
</style>